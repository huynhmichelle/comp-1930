<!DOCTYPE html>
<html lang="en" class="mdl-js"><head>
        <title>Main Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta charset="utf-8">
        <meta name="description" content="main page">
        <style>
            #mapbox-elements {
                float: left;
                ;
                min-width: 300px;
                min-height: 300px;
            }
    
            #body {
                border: 1px solid red;
                margin: 0;
                padding: 0;
            }
    
            #map-holder {
    
                width: 100%;
                max-width: 800px;
                height: 100%;
                margin: auto;
            }
    
            #map {
                position: initial;
                z-index: -10;
                /* display: inline; */
                visibility: hidden;
    
            }
    
            .mapboxgl-ctrl-geocoder {
                min-width: 100%;
            }
    
            .user-profile-elements {
                visibility: hidden;
            }
        </style>
        <!--jQuery-->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <!--Mapbox-->
        <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js"></script>
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.min.js"></script>
        <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.2.0/mapbox-gl-geocoder.css" type="text/css">
        <!--Firebase-->
        <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css">
        <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
        <!--Bootstrap-->
        <link type="text/css" rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="styles/header2.css">
    </head>
    
    <body>
    
        <nav id="navbar-site" class="navbar navbar-dark headerstyle navbar-expand-sm">
            <div class="navbar-header">
                <div id="main; buttonstyle" style="margin-left: 0px;">
                    <button class="openbtn" onclick="openNav()" style="float:left">☰</button>
                </div>
                <div class="container;text-center">
                    <a href="login.html"><button id="login-button" class="btn btn-lg btn-primary" style="float: right;" type="button">Login</button>
                    <a class="navbar-brand" href="main.html" style="font-size:40px">APP NAME</a>
                </a></div><a href="login.html">
                </a><div id="mySidebar" class="sidebar" style="width: 0px;"><a href="login.html">
                    </a><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                    <a href="main.html">Homepage</a>
                    <a href="user_profile.html">User profile</a>
                    <a href="#">About us</a>
                    <a href="#">FAQ</a>
                    <a href="#">Contact us</a>
                    <a href="landing.html">Logout</a>
                </div>
            </div>
            
        </nav>
        <div class="container">
            <br>
            <h2>I am looking for a...</h2>
            <table class="table table-light table-striped">
                <tbody>
                    <tr>
                        <td>
                            <div class="custom-control custom-checkbox custom-control-inline">
                                <input type="checkbox" class="custom-control-input" id="defaultInline1">
                                <label class="custom-control-label" for="defaultInline1" style="font-size:20px">Roommate</label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="custom-control custom-checkbox custom-control-inline">
                                <input type="checkbox" class="custom-control-input" id="defaultInline2">
                                <label class="custom-control-label" for="defaultInline2" style="font-size:20px">Tenant</label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="custom-control custom-checkbox custom-control-inline">
                                <input type="checkbox" class="custom-control-input" id="defaultInline3">
                                <label class="custom-control-label" for="defaultInline3" style="font-size:20px">Place to
                                    live</label>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br>
            <div class="input-group">
                <!--<input class="form-control py-2 border-left-0 border" type="search" placeholder="In this location..." style="font-size:20px" id="example-search-input" />-->
                <span style="width: 100%;" class="input-group-append">
                    <div id="geocoder" class="geocoder"><div class="mapboxgl-ctrl-geocoder mapboxgl-ctrl" style="width: 100%;"><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"></path></svg><input type="text" class="mapboxgl-ctrl-geocoder--input" placeholder="In this location..." style="font-size: 1.2em;"><div class="suggestions-wrapper"><ul class="suggestions" style="display: none;"></ul></div><div class="mapboxgl-ctrl-geocoder--pin-right"><button aria-label="Clear" class="mapboxgl-ctrl-geocoder--button"><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"></path></svg></button><svg class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading" viewBox="0 0 18 18" xml:space="preserve" width="18" height="18"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg></div></div></div>
                    <a href="search.html"><button class="btn btn-success" type="button">Search</button></a>
                </span>
            </div>
            <!--Mapbox html elements-->
            <div id="mapbox-elements">
            </div>
        </div>
    
        <div id="map" class="mapboxgl-map"><div class="mapboxgl-canary" style="visibility: hidden;"></div><div class="mapboxgl-canvas-container mapboxgl-interactive mapboxgl-touch-drag-pan mapboxgl-touch-zoom-rotate"><canvas class="mapboxgl-canvas" tabindex="0" aria-label="Map" width="120" height="600" style="position: absolute; width: 60px; height: 300px;"></canvas></div><div class="mapboxgl-control-container"><div class="mapboxgl-ctrl-top-left"></div><div class="mapboxgl-ctrl-top-right"></div><div class="mapboxgl-ctrl-bottom-left"><div class="mapboxgl-ctrl" style="display: block;"><a class="mapboxgl-ctrl-logo mapboxgl-compact" target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo"></a></div></div><div class="mapboxgl-ctrl-bottom-right"></div></div></div>
        <div id="map-holder">
            <!--  style="width: 50%; height: 50%;" -->
        </div>
    
        <script>
            function initMap() {
                // MAPBOX
                mapboxgl.accessToken = 'pk.eyJ1Ijoib3BhbDkiLCJhIjoiY2szYjB4djJnMDZmcjNicGl2NzJreGtjbiJ9.evKRAMb-mO-4VEmgWjLuEw';
                var map = new mapboxgl.Map({
                    container: 'map', // container id
                    style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location, also 'mapbox://styles/mapbox/light-v10',
                    center: [-123.09817, 49.23340], // starting position [lng, lat]
                    zoom: 11, // starting zoom, can be float
                    attributionControl: false
                });
    
                var geocoder = new MapboxGeocoder({ // Initialize the geocoder
                    accessToken: mapboxgl.accessToken, // Set the access token
                    mapboxgl: mapboxgl, // Set the mapbox-gl instance
                    marker: true, // Use default marker
                });
    
                map.on('load', function () {
                    var mapCanvas = document.getElementsByClassName('mapboxgl-canvas')[0];
                    var mapDiv = document.getElementById('map');
                    //mapDiv.style.width = '50%';
                    //mapCanvas.style.width = '100%';
    
                    map.resize();
                    // Listen for the `result` event from the Geocoder
                    // `result` event is triggered when a user makes a selection
                    //  Add a marker at the result's coordinates
                    geocoder.on('result', function (e) {
                        map.getSource('single-point').setData(e.result.geometry);
                    });
                });
    
                // Add geocoder to its div
                document.getElementById('geocoder').appendChild(geocoder.onAdd(map));
                let geocoderInput = document.getElementsByClassName('mapboxgl-ctrl-geocoder--input')[0];
                document.getElementsByClassName('mapboxgl-ctrl-geocoder')[0].style.width = "100%";
                console.log(geocoderInput);
                geocoderInput.placeholder = 'In this location...';
                geocoderInput.style.width = "10";
                geocoderInput.style.fontSize = "1.2em";
            }
    
            // Call initMap
            initMap();
    
        </script>
    
        <script>
            function openNav() {
                document.getElementById("mySidebar").style.width = "250px";
                document.getElementById("main").style.marginLeft = "250px";
            }
    
            function closeNav() {
                document.getElementById("mySidebar").style.width = "0";
                document.getElementById("main").style.marginLeft = "0";
            }
        </script>
    
        <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
    
        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyCOl7zfOtE5H75WPViBv-jNxn9nZLhHNFo",
                authDomain: "fire1-2c085.firebaseapp.com",
                databaseURL: "https://fire1-2c085.firebaseio.com",
                projectId: "fire1-2c085",
                storageBucket: "fire1-2c085.appspot.com",
                messagingSenderId: "228703666474",
                appId: "1:228703666474:web:3bacd2b08daf85a79cde53",
                measurementId: "G-8V89TB50QY"
            };
    
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            console.log('initialized firebase');
    
            firebase.auth().onAuthStateChanged(function (user) {
                console.log('on auth state changed');
                if (user) {
                    // User is signed in.
                    console.log('LOGGED IN');
                    console.log(user.uid);
                    // Make profile elements visisble when user is logged in
                    const profileElements = document.querySelectorAll('.user-profile-elements');
                    profileElements.forEach(element => {
                        element.style.visibility = 'visible';
                    });
                    // Hide login button
                    document.getElementById('login-button').style.visibility = 'hidden';
    
                } else {
                    console.log('NOT LOGGED IN');
                    // No user is signed in.
                }
            });
        </script>
    
    
    </body></html>

